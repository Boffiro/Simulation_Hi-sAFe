# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
write.table(input_runs, file = "input_runs.csv", sep = ",", row.names = FALSE, quote = FALSE)
#This code performs the following operations:
# 1. Load the tidyverse and rstudioapi libraries.
# 2. Clear the workspace to remove existing objects.
# 3. Set the working directory to the root of the RStudio project.
# 4. Define the script parameters using the param_list list.
# 5. Create a table input_runs containing all possible combinations of parameters.
# 6. Create a new column RunID by concatenating the values of other columns.
# 7. Add a RunNumber column to number each row in the table.
# 8. Move the RunID column to the first position in the table.
# 9. Save the result to a CSV file named "input_runs.csv" in the "Climats_Cler_Mtp/C_outputs/Inputs_runs/" directory.
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
View(input_runs)
length(input_runs)
row_number(input_runs)
length(row_number(input_runs))
1:length(row_number(input_runs))
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[,1], collapse = T)
}
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[,1], collapse = F)
}
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[,1], sep ="_", collapse = F)
}
RunID[i] <- paste0(input_runs[,1], sep ="_")
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[,1], sep ="_")
}
RunID <- vector()
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[,1], sep ="_")
}
for (i in 1:length(row_number(input_runs))) {
RunID[i] <- paste0(input_runs[i,], sep ="_")
}
RunID[i] <- paste0(input_runs[i,], sep ="_")
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste0(input_runs[i,], sep ="_")
}
RunID <- data.frame()
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste0(input_runs[i,], sep ="_")
}
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
RunID <- data.frame()
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
View(RunID)
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
View(param_list)
input_runs$RunID <- RunID[,1]
View(input_runs)
# Load libraries
library(tidyverse)    # Load tidyverse to use data manipulation functions
library(rstudioapi)   # Load rstudioapi to access RStudio project information
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
# Create the RunID column by concatenating the values of other columns
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
input_runs$RunID <- RunID[,1]
# Add a RunNumber column to number each row
input_runs <- input_runs %>%
mutate(RunNumber = row_number())
# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
write.table(input_runs, file = "input_runs.csv", sep = ",", row.names = FALSE, quote = FALSE)
#This code performs the following operations:
# 1. Load the tidyverse and rstudioapi libraries.
# 2. Clear the workspace to remove existing objects.
# 3. Set the working directory to the root of the RStudio project.
# 4. Define the script parameters using the param_list list.
# 5. Create a table input_runs containing all possible combinations of parameters.
# 6. Create a new column RunID by concatenating the values of other columns.
# 7. Add a RunNumber column to number each row in the table.
# 8. Move the RunID column to the first position in the table.
# 9. Save the result to a CSV file named "input_runs.csv" in the "Climats_Cler_Mtp/C_outputs/Inputs_runs/" directory.
# Load libraries
library(tidyverse)    # Load tidyverse to use data manipulation functions
library(rstudioapi)   # Load rstudioapi to access RStudio project information
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
# Create the RunID column by concatenating the values of other columns
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
input_runs$RunID <- RunID[,1]
# Add a RunNumber column to number each row
input_runs <- input_runs %>%
mutate(RunNumber = row_number())
# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
write.table(input_runs, file = "input_runs.csv", sep = ",", row.names = FALSE, quote = FALSE)
#This code performs the following operations:
# 1. Load the tidyverse and rstudioapi libraries.
# 2. Clear the workspace to remove existing objects.
# 3. Set the working directory to the root of the RStudio project.
# 4. Define the script parameters using the param_list list.
# 5. Create a table input_runs containing all possible combinations of parameters.
# 6. Create a new column RunID by concatenating the values of other columns.
# 7. Add a RunNumber column to number each row in the table.
# 8. Move the RunID column to the first position in the table.
# 9. Save the result to a CSV file named "input_runs.csv" in the "Climats_Cler_Mtp/C_outputs/Inputs_runs/" directory.
rm(list = ls())
setwd(dirname(rstudioapi::getActiveProject()))
setwd(dir = "Climats_Cler_Mtp/")
path_to_simulation <- paste0(getwd(), "/C_outputs/Simulation/")
profiles <- c("all")
inputs_runs <- read.csv2(file = "A_data/input_runs.csv")
View(inputs_runs)
inputs_runs <- read.csv2(file = "A_data/input_runs.csv", sep = ",")
View(inputs_runs)
i = 1
ensemble_run[[i]] <- define_hisafe(path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
#simulationYearStart = 1994,
#nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i],".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i],".tec"),
treeSpecies = "poplar.tree")
library(hisafer)
library(tidyverse)
library(rstudioapi)
ensemble_run[[i]] <- define_hisafe(path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
#simulationYearStart = 1994,
#nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i],".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i],".tec"),
treeSpecies = "poplar.tree")
rm(list = ls())
setwd(dirname(rstudioapi::getActiveProject()))
setwd(dir = "Climats_Cler_Mtp/")
path_to_simulation <- paste0(getwd(), "/C_outputs/Simulation/")
profiles <- c("all")
inputs_runs <- read.csv2(file = "A_data/input_runs.csv", sep = ",")
ensemble_run <- vector(mode = "list", length = nrow(inputs_runs))
i = 1
ensemble_run[[i]] <- define_hisafe(path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
#simulationYearStart = 1994,
#nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i],".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i],".tec"),
treeSpecies = "poplar.tree")
names(ensemble_run)[[i]] <- inputs_runs$RunID[i]
View(ensemble_run)
build_hisafe(hip = ensemble_run[[i]])
rlang::last_trace()
rlang::last_trace(drop = FALSE)
View(inputs_runs)
# Load libraries
library(tidyverse)    # Load tidyverse to use data manipulation functions
library(rstudioapi)   # Load rstudioapi to access RStudio project information
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
# Create the RunID column by concatenating the values of other columns
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
}
input_runs$RunID <- RunID[,1]
# Add a RunNumber column to number each row
input_runs <- input_runs %>%
mutate(RunNumber = row_number())
# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
View(input_runs)
# Load libraries
library(tidyverse)    # Load tidyverse to use data manipulation functions
library(rstudioapi)   # Load rstudioapi to access RStudio project information
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
# Create the RunID column by concatenating the values of other columns
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
RunID[i,] <- gsub("Default_", "", RunID[i,])
}
input_runs$RunID <- RunID[,1]
# Add a RunNumber column to number each row
input_runs <- input_runs %>%
mutate(RunNumber = row_number())
# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
View(input_runs)
# Load libraries
library(tidyverse)    # Load tidyverse to use data manipulation functions
library(rstudioapi)   # Load rstudioapi to access RStudio project information
# Clear the workspace
rm(list = ls())
# Set the working directory to the root of the RStudio project
setwd(dirname(rstudioapi::getActiveProject()))
# Define script parameters
param_list <- list(
AgriculturalSystem = c("monocrop", "agroforestry"),
AgriculturalSystemDesign = c("Default"),
YearStart = c(1980),
YearEnd = c(2020),
TreeSpecies = c("poplar"),
TreeStartAge = c(20),
TreeIntervention = c("Default"),
CropSpecies = c("durum-wheat"),
CropItk = c("Default"),
Soil = c("Default"),
Climate = c("Mediterranean", "Continental")
)
# Create all possible combinations of parameters
input_runs <- expand.grid(param_list, stringsAsFactors = FALSE)
# Create the RunID column by concatenating the values of other columns
RunID <- data.frame(matrix(nrow = 4,ncol = 1))
for (i in 1:length(row_number(input_runs))) {
RunID[i,] <- paste(input_runs[i,], collapse = "_")
RunID[i,] <- gsub("Default_", "", RunID[i,])
}
input_runs$RunID <- RunID[,1]
# Add a RunNumber column to number each row
input_runs <- input_runs %>%
mutate(RunNumber = row_number())
# Move the RunID column to the first position
input_runs <- input_runs %>%
select(RunID, RunNumber, everything())
# Save the result to a CSV file
setwd(dir = "Climats_Cler_Mtp/C_outputs/Inputs_runs/")
write.table(input_runs, file = "input_runs.csv", sep = ",", row.names = FALSE, quote = FALSE)
#This code performs the following operations:
# 1. Load the tidyverse and rstudioapi libraries.
# 2. Clear the workspace to remove existing objects.
# 3. Set the working directory to the root of the RStudio project.
# 4. Define the script parameters using the param_list list.
# 5. Create a table input_runs containing all possible combinations of parameters.
# 6. Create a new column RunID by concatenating the values of other columns.
# 7. Add a RunNumber column to number each row in the table.
# 8. Move the RunID column to the first position in the table.
# 9. Save the result to a CSV file named "input_runs.csv" in the "Climats_Cler_Mtp/C_outputs/Inputs_runs/" directory.
rm(list = ls())
setwd(dirname(rstudioapi::getActiveProject()))
setwd(dir = "Climats_Cler_Mtp/")
path_to_simulation <- paste0(getwd(), "/C_outputs/Simulation/")
profiles <- c("all")
inputs_runs <- read.csv2(file = "A_data/input_runs.csv", sep = ",")
ensemble_run <- vector(mode = "list", length = nrow(inputs_runs))
i = 1
ensemble_run[[i]] <- define_hisafe(path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
#weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
#simulationYearStart = 1994,
#nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i],".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i],".tec"),
treeSpecies = "poplar.tree")
names(ensemble_run)[[i]] <- inputs_runs$RunID[i]
build_hisafe(hip = ensemble_run[[i]])
styler:::style_active_file()
library(hisafer)
library(tidyverse)
library(rstudioapi)
# Script
## Setup
rm(list = ls())
setwd(dirname(rstudioapi::getActiveProject()))
setwd(dir = "Climats_Cler_Mtp/")
path_to_simulation <- paste0(getwd(), "/C_outputs/Simulation/")
profiles <- c("all")
## Setup des runs
inputs_runs <- read.csv2(file = "A_data/input_runs.csv", sep = ",")
## Creation des runs
ensemble_run <- vector(mode = "list", length = nrow(inputs_runs))
for (i in 1:nrow(inputs_runs)) {
ensemble_run[[i]] <- define_hisafe(
path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
# weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
# weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
# simulationYearStart = 1994,
# nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i], ".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i], ".tec"),
treeSpecies = "poplar.tree"
)
names(ensemble_run)[[i]] <- inputs_runs$RunID[i]
build_hisafe(hip = ensemble_run[[i]])
}
library(hisafer)
library(tidyverse)
library(rstudioapi)
# Script
## Setup
rm(list = ls())
setwd(dirname(rstudioapi::getActiveProject()))
setwd(dir = "Climats_Cler_Mtp/")
path_to_simulation <- paste0(getwd(), "/C_outputs/Simulation/")
profiles <- c("all")
## Setup des runs
inputs_runs <- read.csv2(file = "A_data/input_runs.csv", sep = ",")
## Creation des runs
ensemble_run <- vector(mode = "list", length = nrow(inputs_runs))
for (i in 1:nrow(inputs_runs)) {
ensemble_run[[i]] <- define_hisafe(
path = path_to_simulation,
template = inputs_runs$AgriculturalSystem[i],
exp.name = "TestEffetClimat",
SimulationName = inputs_runs$RunID[i],
profiles = profiles,
# weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/weather.wth",
# weatherFile = "C:/Users/fsoulard/Documents/Simulations_Hi-sAFe/ClimatsClerMtp/Continental.wth",
weatherFile = "A_data/meteo/TEST.wth",
simulationYearStart = inputs_runs$YearStart[i],
nbSimulations = inputs_runs$YearEnd[i] - inputs_runs$YearStart[i],
# simulationYearStart = 1994,
# nbSimulations = 1,
mainCropSpecies = paste0(inputs_runs$CropSpecies[i], ".plt"),
mainCropItk = paste0(inputs_runs$CropSpecies[i], ".tec"),
treeSpecies = "poplar.tree"
)
names(ensemble_run)[[i]] <- inputs_runs$RunID[i]
build_hisafe(hip = ensemble_run[[i]])
}
## Lancement des runs
for (i in 1:nrow(inputRuns)) {
timestamp()
run_hisafe(hip = ensembleRun[[i]], capsis.path = "C:/Users/fsoulard/Documents/CAPSIS/")
timestamp()
}
for (i in 1:nrow(input_runs)) {
timestamp()
run_hisafe(hip = ensemble_run[[i]], capsis.path = "C:/Users/fsoulard/Documents/CAPSIS/")
timestamp()
}
for (i in 1:nrow(inputs_runs)) {
timestamp()
run_hisafe(hip = ensemble_run[[i]], capsis.path = "C:/Users/fsoulard/Documents/CAPSIS/")
timestamp()
}
##------ Fri Aug  4 16:18:20 2023 ------##
##------ Fri Aug  4 16:28:09 2023 ------##
##------ Fri Aug  4 16:28:09 2023 ------##
